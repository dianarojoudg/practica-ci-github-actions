name: CI Pipeline - PrÃ¡ctica Universitaria

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¥ Clonar repositorio
        uses: actions/checkout@v4
      
      - name: ğŸ“¦ Simular instalaciÃ³n de dependencias
        run: |
          echo "âœ… Dependencias instaladas correctamente"
          echo "âœ… Dependencias instaladas correctamente" > resultado.txt
      
      - name: ğŸ§ª Ejecutar pruebas simuladas
        run: |
          echo "ğŸ§ª Ejecutando pruebas unitarias..."
          echo "Test 1: Passed âœ…"
          echo "Test 2: Passed âœ…"
          echo "Cobertura de cÃ³digo: 95%"
      
      - name: ğŸ“„ Mostrar resultado
        run: cat resultado.txt

  # ğŸ‘‡ ESTE ES EL JOB QUE CREARÃ EL ENVIRONMENT
  deploy-simulation:
    runs-on: ubuntu-latest
    needs: test  # Espera a que 'test' termine primero
    environment:
      name: practica-ci-webappio  # ğŸ‘ˆ ESTO CREA EL ENVIRONMENT
      url: https://github.com/${{ github.repository }}  # URL opcional
    steps:
      - name: ğŸš€ Simular despliegue en environment
        run: |
          echo "ğŸŒ Desplegando en environment: practica-ci-webappio"
          echo "âœ… SimulaciÃ³n de despliegue completada"
          echo "ğŸ“Š Estado: Exitoso"
